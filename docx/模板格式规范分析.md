# 模板格式规范分析 - SY001 童萌-节庆活动方案模板

## 一、模板结构分析

### 1.1 基本信息区域（表格形式）
```
节日：xxxx
活动名称：x
材料：xxx
```

### 1.2 环节流程区域
每个环节包含以下结构：
```
环节X：标题内容    x分钟
• 操作方法：
  1. xxxx。
  2. xxx。
  3. xxxx。
• 主/助教分工：
  xxx
• 教师指导语：
  1. xxxxxx
  2. xxxxxxxxx。
```

## 二、格式规范要求

### 2.1 基本信息区域
- **节日**：必填，文本格式
- **活动名称**：必填，文本格式
- **材料**：必填，文本格式

### 2.2 环节流程格式规范

#### 环节标题
- **格式**：`环节X：标题内容`（X为数字，1、2、3...）
- **要求**：
  - 必须以"环节"开头
  - 必须有数字编号
  - 必须有冒号（：或:）
  - 必须有标题内容

#### 时间标注
- **格式**：`x分钟`（x为数字）
- **位置**：环节标题同一行右侧
- **要求**：必须标注时间

#### 操作方法
- **格式要求**：
  - 标题：`操作方法：`（必须有冒号）
  - 列表：使用数字序号 `1. 2. 3.`（数字 + 点 + 空格）
  - 每项以句号结尾
  - 至少1项

#### 主/助教分工
- **格式要求**：
  - 标题：`主/助教分工：`（必须有冒号）
  - 内容：文本格式
  - 必填

#### 教师指导语
- **格式要求**：
  - 标题：`教师指导语：`（必须有冒号）
  - 列表：使用数字序号 `1. 2. 3.`（数字 + 点 + 空格）
  - 每项可以以句号结尾（可选）
  - 至少1项

## 三、识别规则

### 3.1 模板识别
- **文件名匹配**：`SY001` 或包含 `节庆活动方案模板`
- **内容匹配**：包含 `童萌-节庆活动方案模板` 或 `环节流程`

### 3.2 结构识别
1. **基本信息区域**：通过关键词识别（节日、活动名称、材料）
2. **环节识别**：通过正则 `/环节\d+[：:]/` 识别
3. **子项识别**：通过关键词识别（操作方法、主/助教分工、教师指导语）

## 四、验证规则

### 4.1 必填验证
- [ ] 节日字段已填写（不是占位符）
- [ ] 活动名称已填写（不是占位符）
- [ ] 材料已填写（不是占位符）
- [ ] 至少包含1个环节
- [ ] 每个环节包含：操作方法、主/助教分工、教师指导语

### 4.2 格式验证
- [ ] 环节标题格式正确：`环节X：标题`
- [ ] 每个环节有时间标注：`x分钟`
- [ ] 操作方法使用数字序号：`1. 2. 3.`
- [ ] 教师指导语使用数字序号：`1. 2. 3.`
- [ ] 序号格式统一：`数字. 空格`（不是 `数字。` 或 `数字、`）

### 4.3 内容验证
- [ ] 环节标题有实际内容（不是只有"环节X："）
- [ ] 操作方法至少1项
- [ ] 教师指导语至少1项
- [ ] 主/助教分工有内容

## 五、常见格式错误

1. **序号格式错误**
   - ❌ `1。`（中文句号）
   - ❌ `1、`（顿号）
   - ❌ `一、`（中文数字）
   - ✅ `1. `（数字 + 英文点 + 空格）

2. **环节标题格式错误**
   - ❌ `环节一：`（中文数字）
   - ❌ `环节1`（缺少冒号）
   - ❌ `环节 1：`（有空格）
   - ✅ `环节1：`（数字 + 冒号）

3. **时间标注错误**
   - ❌ `10 分钟`（有空格）
   - ❌ `十分钟`（中文）
   - ❌ 缺少时间标注
   - ✅ `10分钟`（数字 + 分钟）

4. **标题格式错误**
   - ❌ `操作方法`（缺少冒号）
   - ❌ `操作方法：`（中文冒号，可以接受）
   - ✅ `操作方法：`（有冒号）

## 六、实现方案

### 6.1 正则表达式规则

```javascript
// 环节标题
const segmentPattern = /^环节\d+[：:]\s*.+/;

// 时间标注
const timePattern = /\d+\s*分钟/;

// 操作方法标题
const methodPattern = /^[•·]\s*操作方法[：:]/;

// 序号列表
const numberingPattern = /^\d+\.\s+/;

// 主/助教分工标题
const divisionPattern = /^[•·]\s*主\/助教分工[：:]/;

// 教师指导语标题
const guidancePattern = /^[•·]\s*教师指导语[：:]/;
```

### 6.2 验证流程

1. **识别模板类型**：通过文件名或内容识别
2. **提取基本信息**：提取节日、活动名称、材料
3. **提取环节**：识别所有环节
4. **验证每个环节**：
   - 验证环节标题格式
   - 验证时间标注
   - 验证操作方法格式
   - 验证主/助教分工
   - 验证教师指导语格式
5. **生成报告**：列出所有格式错误和警告

